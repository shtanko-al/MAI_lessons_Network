# Выполнение

## Теоретическая часть
* Найти свободные подсети
* Посчитать сколько узлов в каждой подсети, включая свободные
* Указать broadcast адрес для каждой подсети
* Проверить нет ли ошибок при разбиении

Про ошибки разбиения: как минимум, для избежания путаницы, переименовать сети так, чтобы office1 была 192.168.1.x, а office2 192.168.2.x

## Схема сети
 [схема сети](https://app.diagrams.net/#G1gYoQV-3EuAFWX8u0kSCpouW5Ecjqh2U1)

### сеть Central 192.168.0.х

#### подсеть directors 192.168.0.0/28
- адрес сети: 192.168.0.0
- маска сети:	255.255.255.240
- начальный адрес: 192.168.0.1
- конечный адрес: 192.168.0.14
- броадкаст: 192.168.0.15

#### подсеть free_1 192.168.0.16/28
- адрес сети: 192.168.0.16
- маска сети:	255.255.255.240
- начальный адрес: 192.168.0.17
- конечный адрес: 192.168.0.30
- броадкаст: 192.168.0.31

#### подсеть office hardware 192.168.0.32/28
- адрес сети: 192.168.0.32
- маска сети	255.255.255.240
- начальный адрес: 192.168.0.33
- конечный адрес: 192.168.0.46
- броадкаст: 192.168.0.47

#### подсеть free_2 192.168.0.48/28
- адрес сети: 192.168.0.48
- маска сети	255.255.255.240
- начальный адрес: 192.168.0.49
- конечный адрес: 192.168.0.62
- броадкаст: 192.168.0.63

#### подсеть wifi 192.168.0.64/26
- адрес сети: 192.168.0.64
- маска сети	255.255.255.192
- начальный адрес: 192.168.0.65
- конечный адрес: 192.168.0.126
- броадкаст: 192.168.0.127

#### подсеть свободна 192.168.0.128/25
- адрес сети: 192.168.0.128
- маска сети	255.255.255.128
- начальный адрес: 192.168.0.129
- конечный адрес: 192.168.0.254
- броадкаст: 192.168.0.255

### сеть office1 192.168.1.x (в диапазоне 192.168.1.х все подсети заняты)

#### подсеть dev 192.168.1.0/25:
- адрес сети: 192.168.1.0
- маска сети:	255.255.255.126
- начальный адрес: 192.168.1.126
- конечный адрес: 192.168.1.127
- броадкаст:192.168.1.128

#### подсеть test servers 192.168.1.128/26
- адрес сети: 192.168.1.128
- маска сети:	255.255.255.192
- начальный адрес: 192.168.1.129
- конечный адрес: 192.168.1.190
- броадкаст: 192.168.1.191

#### подсеть office hardware 192.168.1.192/26
- адрес сети: 192.168.1.192
- маска сети:	255.255.255.192
- начальный адрес: 192.168.1.193
- конечный адрес: 192.168.1.254
- броадкаст: 192.168.1.255

### сеть office2 192.168.2.x (в диапазоне 192.168.2.х все возможные подсети заняты)

#### подсеть dev 192.168.2.0/26
- адрес сети: 192.168.2.0
- маска сети:	255.255.255.192
- начальный адрес: 192.168.2.1
- конечный адрес: 192.168.2.62
- броадкаст: 192.168.2.63

#### подсеть test servers 192.168.2.64/26
- адрес сети: 192.168.2.64
- маска сети:	255.255.255.192
- начальный адрес: 192.168.2.65
- конечный адрес: 192.168.2.126
- броадкаст: 192.168.2.127

#### подсеть managers 192.168.2.128/26
- адрес сети: 192.168.2.128
- маска сети:	255.255.255.192
- начальный адрес: 192.168.2.129
- конечный адрес: 192.168.2.190
- броадкаст: 192.168.2.191

#### подсеть office hardware 192.168.2.192/26
- адрес сети: 192.168.2.192
- маска сети:	255.255.255.192
- начальный адрес: 192.168.2.193
- конечный адрес: 192.168.2.254
- броадкаст: 192.168.2.255

## Практическая часть
* Соединить офисы в сеть согласно схеме и настроить роутинг
* Все сервера и роутеры должны ходить в инет черз inetRouter
* Все сервера должны видеть друг друга
* У всех новых серверов отключить дефолт на нат (eth0), который вагрант поднимает для связи
* При нехватке сетевых интервейсов добавить по несколько адресов на интерфейс

## После запуска Vagrant'а

### Отключение интерфеса eth0:
Везде, кроме inetRouter
```
ip link set eth0 down
```
---

### Настройка маршрутизации
На серверах надо удалить все маршруты и прописать один дефолтный
```
ip route add default via xxx.xxx.xxx.xxx dev eth1
```
---

### настройка DNS:
Пропишем DNS. они находятся в файле ```resolv.conf```

```
vi /etc/resolv.conf
```

надо написать строчку

```nameserver 8.8.8.8```

и перезапустить сеть
```
/etc/init.d/network restart
или
service network restart
```
так перезапустить не получилось, пришлось перезагрузить ```shutdown -r```

Это надо сделать везде, кроме inetRouter. Теоритически, можно не прописывать на машинах-маршрутизаторах, но тогда даже обновить их не получиться
